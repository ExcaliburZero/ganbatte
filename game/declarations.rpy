label run_declarations:
    ####################################
    # Images
    ####################################

    ###################
    # Character images
    ###################

    # Kosuke
    image kosuke angry = "images/characters/kosuke_normal.png"
    image kosuke annoyed = "images/characters/kosuke_normal.png"
    image kosuke confused = "images/characters/kosuke_normal.png"
    image kosuke blush = "images/characters/kosuke_normal.png"
    image kosuke happy = "images/characters/kosuke_normal.png"
    image kosuke horrified = "images/characters/kosuke_normal.png"
    image kosuke innocent = "images/characters/kosuke_normal.png"
    image kosuke normal = "images/characters/kosuke_normal.png"
    image kosuke smirk = "images/characters/kosuke_normal.png"
    image kosuke surprised = "images/characters/kosuke_normal.png"
    image kosuke tired = "images/characters/kosuke_normal.png"
    image kosuke victory = "images/characters/kosuke_normal.png"
    image kosuke upset = "images/characters/kosuke_normal.png"

    image kosuke uniform angry = "images/characters/kosuke_normal.png"
    image kosuke uniform awkward = "images/characters/kosuke_normal.png"
    image kosuke uniform confused = "images/characters/kosuke_normal.png"
    image kosuke uniform blush = "images/characters/kosuke_normal.png"
    image kosuke uniform grateful = "images/characters/kosuke_normal.png"
    image kosuke uniform happy = "images/characters/kosuke_normal.png"
    image kosuke uniform jealous = "images/characters/kosuke_normal.png"
    image kosuke uniform puppyEyes = "images/characters/kosuke_normal.png"
    image kosuke uniform normal = "images/characters/kosuke_normal.png"
    image kosuke uniform salute = "images/characters/kosuke_normal.png"
    image kosuke uniform shocked = "images/characters/kosuke_normal.png"
    image kosuke uniform smirk = "images/characters/kosuke_normal.png"
    image kosuke uniform upset = "images/characters/kosuke_normal.png"

    # Misaki
    image misaki angry = "images/characters/misaki_normal.png"
    image misaki annoyed = "images/characters/misaki_normal.png"
    image misaki blush = "images/characters/misaki_normal.png"
    image misaki yandere = "images/characters/misaki_normal.png"
    image misaki happy = "images/characters/misaki_normal.png"
    image misaki horrified = "images/characters/misaki_normal.png"
    image misaki normal = "images/characters/misaki_normal.png"
    image misaki smirk = "images/characters/misaki_normal.png"
    image misaki surprised = "images/characters/misaki_normal.png"
    image misaki upset = "images/characters/misaki_normal.png"

    image misaki uniform angry = "images/characters/misaki_normal.png"
    image misaki uniform blush = "images/characters/misaki_normal.png"
    image misaki uniform embarrassed = "images/characters/misaki_normal.png"
    image misaki uniform happy = "images/characters/misaki_normal.png"
    image misaki uniform normal = "images/characters/misaki_normal.png"
    image misaki uniform smirk = "images/characters/misaki_normal.png"
    image misaki uniform upset = "images/characters/misaki_normal.png"

    # Ms. Kasai
    image msKasai happy = "images/characters/mskasai_normal.png"
    image msKasai horrified = "images/characters/mskasai_normal.png"
    image msKasai normal = "images/characters/mskasai_normal.png"

    # Mr. Kasai
    image mrKasai happy = "images/characters/mrkasai_normal.png"
    image mrKasai horrified = "images/characters/mrkasai_normal.png"
    image mrKasai normal = "images/characters/mrkasai_normal.png"

    # Riku
    image riku annoyed = "images/characters/riku_normal.png"
    image riku defeated = "images/characters/riku_normal.png"
    image riku upset = "images/characters/riku_normal.png"
    image riku happy = "images/characters/riku_normal.png"
    image riku ill = "images/characters/riku_normal.png"
    image riku normal = "images/characters/riku_normal.png"
    image riku smirk = "images/characters/riku_normal.png"
    image riku surprised = "images/characters/riku_normal.png"
    image riku wondering = "images/characters/riku_normal.png"

    # Megumi
    image megumi happy = "images/characters/megumi_normal.png"

    image megumi uniform happy = "images/characters/megumi_normal.png"
    image megumi uniform realization = "images/characters/megumi_normal.png"

    # Yuta
    image yuta normal = "images/characters/yuta_normal.png"

    image yuta uniform normal = "images/characters/yuta_normal.png"
    image yuta uniform realization = "images/characters/yuta_normal.png"
    image yuta uniform sadisticExcitement = "images/characters/yuta_normal.png"
    image yuta uniform surprised = "images/characters/yuta_normal.png"

    # Sora
    image sora happy = "images/characters/sora_normal.png"

    image sora uniform happy = "images/characters/sora_normal.png"
    image sora uniform horrified = "images/characters/sora_normal.png"
    image sora uniform mischievous = "images/characters/sora_normal.png"

    # Kokona
    image kokona happy = "images/characters/kokona_normal.png"
    image kokona normal = "images/characters/kokona_normal.png"

    image kokona uniform blush = "images/characters/kokona_normal.png"
    image kokona uniform grateful = "images/characters/kokona_normal.png"
    image kokona uniform happy = "images/characters/kokona_normal.png"
    image kokona uniform normal = "images/characters/kokona_normal.png"
    image kokona uniform surprised = "images/characters/kokona_normal.png"
    image kokona uniform tearful = "images/characters/kokona_normal.png"
    image kokona uniform troubled = "images/characters/kokona_normal.png"
    image kokona uniform upset = "images/characters/kokona_normal.png"

    # Yuuki
    image yuuki evil = "images/characters/yuuki_normal.png"
    image yuuki happy = "images/characters/yuuki_normal.png"
    image yuuki normal = "images/characters/yuuki_normal.png"

    # Momoko
    image momoko happy = "images/characters/momoko_normal.png"
    image momoko normal = "images/characters/momoko_normal.png"

    ###################
    # Background images
    ###################
    image bg darkness = "images/backgrounds/darkness.png"
    image bg field = "images/backgrounds/dummy.png"

    image bg kasai house outside = "images/backgrounds/dummy.png"
    image bg kasai house inside = "images/backgrounds/dummy.png"
    image bg kasai house hallway = "images/backgrounds/dummy.png"
    image bg kasai house hallway night = "images/backgrounds/dummy.png"
    image bg misaki room = "images/backgrounds/dummy.png"
    image bg misaki room night = "images/backgrounds/dummy.png"
    image bg kosuke room = "images/backgrounds/dummy.png"
    image bg kosuke room night = "images/backgrounds/dummy.png"
    image bg haruki room = "images/backgrounds/dummy.png"
    image bg haruki room night = "images/backgrounds/dummy.png"

    image bg commercialCenter = "images/backgrounds/dummy.png"
    image bg market = "images/backgrounds/dummy.png"
    image bg market bookCart = "images/backgrounds/dummy.png"
    image bg cafe outside = "images/backgrounds/dummy.png"
    image bg cafe inside = "images/backgrounds/dummy.png"
    image bg cafe closet = "images/backgrounds/dummy.png"

    ###################
    # Misc images
    ###################

    # Game Logo
    # Game Logo on main menu is defined in screens file

    # Studio Logo
    # Studio Logo in splash screen is defined in the splashscreen file

    # Heart Icons
    image heart one = "images/misc/heart_grey.png"
    image heart two = "images/misc/heart_blue.png"
    image heart three = "images/misc/heart_purple.png"

    # Click to continue icon
    $ ctc_pos = Position(xpos=0.97, ypos=0.97)

    image ctc_animation:
        xpos 0.97 ypos 0.97
        xanchor 1.0 yanchor 1.0
        "images/misc/ctc_icon.png"

        # Image changes opacities to simulate fading in and out
        alpha 0.3
        linear 1.0 alpha 1.0
        linear 1.0 alpha 0.3
        repeat

    # Day change animation
    image day_change:
        xpos 0.5 ypos 0.8
        "images/misc/moon.png"

        time 2.0

        "images/misc/sun.png" with Dissolve(2.0, alpha=True)

    ####################################
    # Character heart meters
    ####################################
    init python:
        heart_pos = Position(xpos=0.22, ypos=0.724)

        ###################
        # Kosuke
        ###################
        kosuke_points = 0
        kosuke_heart_levels = [2, 3]

        def heart_kosuke(event, interact=True, **kwargs):
            if not interact:
                return

            # Display heart image dependant on the character's heart level
            if event == "begin":
                # Only show Kosuke's heart meter if it is high enough
                if kosuke_points < kosuke_heart_levels[0]:
                    # Do nothing
                    return
                elif kosuke_points < kosuke_heart_levels[1]:
                    renpy.show(name="heart three", layer="icons", at_list=[heart_pos])

        ###################
        # Misaki
        ###################
        misaki_points = 0
        misaki_heart_levels = [1, 2, 3]

        def heart_misaki(event, interact=True, **kwargs):
            if not interact:
                return

            # Display heart image dependant on the character's heart level
            if event == "begin":
                if misaki_points < misaki_heart_levels[0]:
                    renpy.show(name="heart one", layer="icons", at_list=[heart_pos])
                elif misaki_points < misaki_heart_levels[1]:
                    renpy.show(name="heart two", layer="icons", at_list=[heart_pos])
                elif misaki_points < misaki_heart_levels[2]:
                    renpy.show(name="heart three", layer="icons", at_list=[heart_pos])

        ###################
        # Kokona
        ###################
        kokona_points = 0
        kokona_heart_levels = [1, 2, 3]

        def heart_kokona(event, interact=True, **kwargs):
            if not interact:
                return

            # Display heart image dependant on the character's heart level
            if event == "begin":
                if kokona_points < kokona_heart_levels[0]:
                    renpy.show(name="heart one", layer="icons", at_list=[heart_pos])
                elif kokona_points < kokona_heart_levels[1]:
                    renpy.show(name="heart two", layer="icons", at_list=[heart_pos])
                elif kokona_points < kokona_heart_levels[2]:
                    renpy.show(name="heart three", layer="icons", at_list=[heart_pos])

        ###################
        # Yuuki
        ###################
        yuuki_points = 0
        yuuki_heart_levels = [1, 2, 3]

        def heart_yuuki(event, interact=True, **kwargs):
            if not interact:
                return

            # Display heart image dependant on the character's heart level
            if event == "begin":
                if yuuki_points < yuuki_heart_levels[0]:
                    renpy.show(name="heart one", layer="icons", at_list=[heart_pos])
                elif yuuki_points < yuuki_heart_levels[1]:
                    renpy.show(name="heart two", layer="icons", at_list=[heart_pos])
                elif yuuki_points < yuuki_heart_levels[2]:
                    renpy.show(name="heart three", layer="icons", at_list=[heart_pos])

        ###################
        # Momoko
        ###################
        momoko_points = 0
        momoko_heart_levels = [1, 2, 3]

        def heart_momoko(event, interact=True, **kwargs):
            if not interact:
                return

            # Display heart image dependant on the character's heart level
            if event == "begin":
                if momoko_points < momoko_heart_levels[0]:
                    renpy.show(name="heart one", layer="icons", at_list=[heart_pos])
                elif momoko_points < momoko_heart_levels[1]:
                    renpy.show(name="heart two", layer="icons", at_list=[heart_pos])
                elif momoko_points < momoko_heart_levels[2]:
                    renpy.show(name="heart three", layer="icons", at_list=[heart_pos])

    ####################################
    # Character declarations
    ####################################
    define haruki = Character('Haruki', color="#00FF7F", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define kosuke = Character('Kosuke', color="#40E0D0", ctc="ctc_animation", ctc_position="fixed", show_two_window="true", callback=heart_kosuke)
    define misaki = Character('Misaki', color="#EE82EE", ctc="ctc_animation", ctc_position="fixed", show_two_window="true", callback=heart_misaki)
    define riku = Character('Riku', color="#2E8B57", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define sora = Character('Sora', color="#87CEEB", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define megumi = Character('Megumi', color="#FFC0CB", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define yuta = Character('Yuta', color="#FF0000", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define kokona = Character('Kokona', color="#FF00FF", ctc="ctc_animation", ctc_position="fixed", show_two_window="true", callback=heart_kokona)
    define msKasai = Character('Ms. Kasai', color="#5F9EA0", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")
    define mrKasai = Character('Mr. Kasai', color="#5F9EA0", ctc="ctc_animation", ctc_position="fixed", show_two_window="true")

    # Characters that start out as "???"
    define yuuki = DynamicCharacter("yuuki_name", color="#FF8C00", show_two_window="true", callback=heart_yuuki)
    define momoko = DynamicCharacter("momoko_name", color="#FF69B4", show_two_window="true", callback=heart_momoko)

    # Narrator character
    define narrator = Character(None, ctc="ctc_animation", ctc_position="fixed")

    ####################################
    # NVL narrator code
    ####################################
    init:
        $ h = Character(None, kind=nvl) # NVL narrator character

    init python:
        config.empty_window = nvl_show_core
        config.window_hide_transition = dissolve
        config.window_show_transition = dissolve

    ####################################
    # Screen positions
    ####################################

    init:
        $ char_left = Position(xpos=0.15, xanchor="left")
        $ char_right = Position(xpos=0.85, xanchor="right")
